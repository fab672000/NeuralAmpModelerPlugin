{\bfseries{N\+O\+TE\+:}} this documentation was taken from the {\ttfamily faust2api} R\+E\+A\+D\+ME.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md227}{}\doxysection{Overview}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md227}
Thanks to its architectures system, \href{http://faust.grame.fr}{\texttt{ Faust}} can generate a wide range of objects compatible with different platforms (Linux, Windows, O\+SX, R\+PI, Android, i\+OS, R\+OS, Bela and Web/\+Java\+Script) and tools (Max/\+M\+SP, Super\+Collider, PD, V\+ST, AU, L\+V2, etc.). The mechanism behind this was designed to be as modular and reusable as possible. Additionally, the \mbox{\hyperlink{struct_faust}{Faust}} compiler can be embedded in any C++ program using the \href{http://llvm.org/}{\texttt{ L\+L\+VM}} technology making it very portable.

The goal of the {\ttfamily faust2api} project is to provide a tool to easily generate custom A\+P\+Is based on one or several \mbox{\hyperlink{struct_faust}{Faust}} objects. On one hand, \href{http://faust.grame.fr/libraries.html}{\texttt{ Faust D\+SP libraries}} implement hundreds of open source \mbox{\hyperlink{class_d_s_p}{D\+SP}} algorithms that can be turned into C++, C, J\+A\+VA, Java\+Script and L\+L\+VM bit code and embedded in your applications. On the other hand, \mbox{\hyperlink{struct_faust}{Faust}} C++ libraries can carry out a wide range of tasks going from connecting \mbox{\hyperlink{struct_faust}{Faust}} \mbox{\hyperlink{class_d_s_p}{D\+SP}} objects to a specific audio engine (Core\+Audio, Open\+S\+L/\+ES, Alsa, J\+A\+CK, etc.) or adding M\+I\+DI and polyphony support, sensor data handling, etc. to the same object.

Most major \mbox{\hyperlink{struct_faust}{Faust}} targets are supported\+:


\begin{DoxyItemize}
\item i\+OS
\item Android
\item O\+SX Core\+Audio
\item A\+L\+SA
\item J\+A\+CK
\item Port\+Audio
\item R\+T\+Audio
\item open\+Frameworks
\item J\+U\+CE
\end{DoxyItemize}

{\bfseries{N\+O\+TE\+:}} This documentation only provides high level information on how to use {\ttfamily faust2api}. For detailed tutorials on this topic, visit \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-android-apps}{\texttt{ this page}}.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md228}{}\doxysection{Using $<$tt$>$faust2api$<$/tt$>$}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md228}
Elements generated by {\ttfamily faust2api} greatly vary from one platform to another. Thus, a custom documentation is generated and integrated to packages generated by {\ttfamily faust2api} in function of the options provided to it (if you only want to generate the package without the documentation, which can save some compilation time, you can use the {\ttfamily -\/mdoc} option). As a result, this page doesn\textquotesingle{}t provide information on how to use the generated A\+P\+Is, but rather high level instructions on how to configure {\ttfamily faust2api} to carry out specific tasks.

The various options of {\ttfamily faust2api} can be displayed at any point by running\+: \begin{DoxyVerb}faust2api -help
\end{DoxyVerb}


{\ttfamily faust2api} is part of the \href{https://github.com/grame-cncm/faust}{\texttt{ Faust distribution}}. To use it, \mbox{\hyperlink{struct_faust}{Faust}} must be properly installed on your system (read the \mbox{\hyperlink{struct_faust}{Faust}} R\+E\+A\+D\+ME in the previous link to get more information on how to do that).

Common options for all platforms\+:


\begin{DoxyItemize}
\item {\ttfamily -\/opt native$\vert$generic}\+: to activate the best compilation options for the native or generic C\+PU.
\item {\ttfamily -\/nvoices $<$num$>$} \+: creates a polyphonic object with $<$num$>$ voices.
\item {\ttfamily -\/effect $<$effect.\+dsp$>$}\+: adds an effect to the polyphonic synth (this option is ignored if -\/nvoices is not specified).
\item {\ttfamily -\/effect auto}\+: adds an effect (extracted automatically from the dsp file) to the polyphonic synth (this option is ignored if -\/nvoices is not specified).
\item {\ttfamily -\/nodoc} \+: prevents documentation from being generated.
\item {\ttfamily -\/nozip} \+: prevents generated files to be put in a zip file.
\item {\ttfamily -\/target $<$target$>$}\+: sets a name of the target folder or the zip file. Defaults to \char`\"{}dsp-\/faust\char`\"{}
\end{DoxyItemize}

Options supported by i\+OS, Core\+Audio, A\+L\+SA, J\+A\+CK, Port\+Audio, open\+Frameworks and J\+U\+CE\+:


\begin{DoxyItemize}
\item {\ttfamily midi}\+: add built-\/in \mbox{\hyperlink{class_rt_midi}{Rt\+Midi}} support to the A\+PI.
\item {\ttfamily osc}\+: add built-\/in O\+SC support to the A\+PI.
\item {\ttfamily soundfile}\+: add built-\/in \mbox{\hyperlink{struct_soundfile}{Soundfile}} support to the A\+PI.
\end{DoxyItemize}\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md229}{}\doxysubsection{Android Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md229}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into an Android A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/android yourFaustCode.dsp}
\end{DoxyCode}


The J\+A\+VA package name of the A\+PI generated by {\ttfamily faust2api} is {\ttfamily com.\+Dsp\+Faust}. It can easily be changed by using the {\ttfamily -\/package} option. For example, to change the package to {\ttfamily com.\+you.\+Dsp\+Faust}, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/android -\/package com.you yourFaustCode.dsp}
\end{DoxyCode}
\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md230}{}\doxysubsection{i\+O\+S Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md230}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into an i\+OS A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/ios yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add \mbox{\hyperlink{class_rt_midi}{Rt\+Midi}} support to the A\+PI. The {\ttfamily -\/osc} option can be used to add O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md231}{}\doxysubsection{O\+S\+X Core\+Audio Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md231}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into an O\+SX Core\+Audio A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/coreaudio yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add \mbox{\hyperlink{class_rt_midi}{Rt\+Midi}} support to the A\+PI. The {\ttfamily -\/osc} option can be used to add O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md232}{}\doxysubsection{A\+L\+S\+A Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md232}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into an A\+L\+SA A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/alsa yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add \mbox{\hyperlink{class_rt_midi}{Rt\+Midi}} support to the A\+PI. The {\ttfamily -\/osc} option can be used to add O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md233}{}\doxysubsection{J\+A\+C\+K Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md233}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into a J\+A\+CK A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/jack yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add J\+A\+CK M\+I\+DI support to the A\+PI. The {\ttfamily -\/osc} option can be used to add O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md234}{}\doxysubsection{Port\+Audio Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md234}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into a Port\+Audio A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/portaudio yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add \mbox{\hyperlink{class_rt_midi}{Rt\+Midi}} support to the A\+PI. The {\ttfamily -\/osc} option can be used to add O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md235}{}\doxysubsection{R\+T\+Audio Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md235}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into an R\+T\+Audio A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/rtaudio yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add \mbox{\hyperlink{class_rt_midi}{Rt\+Midi}} support to the A\+PI. The {\ttfamily -\/osc} option can be used to add O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md236}{}\doxysubsection{Open\+Frameworks Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md236}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into an open\+Frameworks A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/of yourFaustCode.dsp}
\end{DoxyCode}
\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md237}{}\doxysubsection{J\+U\+C\+E Support}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md237}
To turn a \mbox{\hyperlink{struct_faust}{Faust}} code into a J\+U\+CE A\+PI, just run the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/juce yourFaustCode.dsp}
\end{DoxyCode}


The {\ttfamily -\/midi} option can be used to add J\+U\+CE M\+I\+DI support to the A\+PI. The {\ttfamily -\/osc} option can be used to add J\+U\+CE O\+SC support to the A\+PI.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md238}{}\doxysubsection{Customizing the A\+PI}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md238}
\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md239}{}\doxysubsubsection{Polyphonic Object}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md239}
To create a polyphonic object, set the maximum number of voices of this object using the {\ttfamily -\/nvoices} option e.\+g.\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{faust2api -\/android -\/nvoices 12 yourSynth.dsp}
\end{DoxyCode}


In this case, we\textquotesingle{}re creating an object with a maximum number of 12 polyphonic voices. Voices are only instantiated and computed when they are used, so this is just a safe guard...\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md240}{}\doxysubsubsection{M\+I\+D\+I Enabled Polyphonic Object}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md240}
To create a polyphonic object controllable by a M\+I\+DI keyboard, run the previous command but make sure that the {\ttfamily freq}, {\ttfamily gain} and {\ttfamily gate} parameters are declared in your \mbox{\hyperlink{struct_faust}{Faust}} code. E.\+g\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{f = hslider("freq",300,50,2000,0.01);}
\DoxyCodeLine{bend = hslider("bend[midi:pitchwheel]",1,0,10,0.01) : si.polySmooth(gate,0.999,1);}
\DoxyCodeLine{gain = hslider("gain",1,0,1,0.01);}
\DoxyCodeLine{s = hslider("sustain[midi:ctrl 64]",0,0,1,1); // for sustain pedal}
\DoxyCodeLine{t = button("gate");}
\DoxyCodeLine{}
\DoxyCodeLine{cutoff = hslider("cutoff[midi:ctrl 1]",50,50,4000,0.001) : si.polySmooth(gate,0.999,2);}
\DoxyCodeLine{gate = t+s : min(1);}
\DoxyCodeLine{freq = f*bend;}
\DoxyCodeLine{envelope = gate*gain : si.smoo;}
\DoxyCodeLine{}
\DoxyCodeLine{process = os.sawtooth(freq)*envelope : fi.lowpass(3,cutoff) <: \_,\_;}
\end{DoxyCode}


{\ttfamily freq} (which should be a frequency) will be automatically mapped to M\+I\+DI note numbers, {\ttfamily gain} (which should be a value between 0 and 1) to velocity and {\ttfamily gate} to {\itshape note-\/on} / {\itshape note-\/off} events. Thus, {\ttfamily gate} can be used as a trigger signal for any envelope generator, etc.

Continuous pitch control is carried out through {\ttfamily bend} which is used to modulate the pitch set by {\ttfamily freq}.

Note that we\textquotesingle{}re using the {\ttfamily si.\+poly\+Smooth} function here to smooth the value of some parameters. This function is very useful when creating polyphonic objects as it only starts smoothing after the note was created, preventing \char`\"{}ugly\char`\"{} sweeps, etc.

0.\+999 is the pole of the lowpass used for smoothing and 2 is the number of samples to wait before smoothing begins after the voice was created.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md241}{}\doxysubsubsection{Adding an Audio Effect to a Polyphonic Object}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md241}
If creating a polyphonic synthesizer, it is very likely that you will need to plug its output to an audio effect like a reverb. Putting that effect in your main \mbox{\hyperlink{struct_faust}{Faust}} code is not a good idea since it will be instanciated for each voice which would be very inefficient. Fortunately, {\ttfamily faust2api} can take a second \mbox{\hyperlink{struct_faust}{Faust}} file as one of its arguments, containing an audio effect (could be a chain of audio effects, of course). The only rule is that the number of outputs of the synth must the same as the number of inputs of the effect. For example, your effect \mbox{\hyperlink{struct_faust}{Faust}} file could look like this\+: \begin{DoxyVerb}import("stdfaust.lib");
process = dm.zita_rev1;
\end{DoxyVerb}


{\ttfamily zita\+\_\+rev1} is a stereo reverb with a built-\/in \mbox{\hyperlink{class_u_i}{UI}} that can be connected to the synthesizer presented in the previous section. This code must be saved in a separate \mbox{\hyperlink{struct_faust}{Faust}} file (e.\+g., {\ttfamily effect.\+dsp}).

To generate the corresponding A\+PI on Android, run\+: \begin{DoxyVerb}faust2api -android -nvoices 12 -effect effect.dsp yourSynth.dsp
\end{DoxyVerb}


Keep in mind that the package generated by {\ttfamily faust2api} contains a R\+E\+A\+D\+ME file that you should really read at this point! Also, for more information, check our tutorials on \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-android-apps}{\texttt{ Using {\ttfamily faust2api} to Add Faust Audio Support to Android Apps}} and \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-ios-apps}{\texttt{ Using {\ttfamily faust2api} to Add Faust Audio Support to i\+OS Apps}}.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md242}{}\doxysection{Additional Resources}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_dc4984d85828320f4491a55db9e58576_autotoc_md242}

\begin{DoxyItemize}
\item \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#what-is-faust}{\texttt{ What Is Faust?}}
\item \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#faust-hero-in-2-hours}{\texttt{ Faust Hero in 2 Hours}}
\item \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-android-apps}{\texttt{ Using {\ttfamily faust2api} to Add Faust Audio Support to Android Apps}}
\item \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-ios-apps}{\texttt{ Using {\ttfamily faust2api} to Add Faust Audio Support to i\+OS Apps}} 
\end{DoxyItemize}