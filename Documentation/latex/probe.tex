A programmer may wish to query the available audio device capabilities before deciding which to use. The following example outlines how this can be done.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{// audioprobe.cpp}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "\mbox{\hyperlink{_rt_audio_8h}{RtAudio.h}}"}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \mbox{\hyperlink{class_rt_audio}{RtAudio}} \mbox{\hyperlink{classaudio}{audio}};}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{comment}{// Determine the number of devices available}}
\DoxyCodeLine{  \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} devices = \mbox{\hyperlink{classaudio}{audio}}.getDeviceCount();}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{comment}{// Scan through devices for various capabilities}}
\DoxyCodeLine{  \mbox{\hyperlink{struct_rt_audio_1_1_device_info}{RtAudio::DeviceInfo}} info;}
\DoxyCodeLine{  \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=0; i<devices; i++ ) \{}
\DoxyCodeLine{}
\DoxyCodeLine{    info = \mbox{\hyperlink{classaudio}{audio}}.getDeviceInfo( i );}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordflow}{if} ( info.probed == \textcolor{keyword}{true} ) \{}
\DoxyCodeLine{      \textcolor{comment}{// Print, for example, the maximum number of output channels for each device}}
\DoxyCodeLine{      std::cout << \textcolor{stringliteral}{"device = "} << i;}
\DoxyCodeLine{      std::cout << \textcolor{stringliteral}{": maximum output channels = "} << info.outputChannels << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{    \}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\}}
\end{DoxyCode}


The \mbox{\hyperlink{struct_rt_audio_1_1_device_info}{Rt\+Audio\+::\+Device\+Info}} structure is defined in \mbox{\hyperlink{_rt_audio_8h}{Rt\+Audio.\+h}} and provides a variety of information useful in assessing the capabilities of a device\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{struct_rt_audio_1_1_device_info}{RtAudio::DeviceInfo}} \{}
\DoxyCodeLine{  \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a97573717ccb1e75a834a0a108cd6982d}{probed}};                           \textcolor{comment}{// true if the device capabilities were successfully probed.}}
\DoxyCodeLine{  std::string \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a24df596ab8d54f2eb540c7cf16212b3b}{name}};                      \textcolor{comment}{// Character string device identifier.}}
\DoxyCodeLine{  \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a81aaf488f8158ef55b1bb678f66feb7d}{outputChannels}};           \textcolor{comment}{// Maximum output channels supported by device.}}
\DoxyCodeLine{  \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a56247b458a937ae84d98ca9c4b243275}{inputChannels}};            \textcolor{comment}{// Maximum input channels supported by device.}}
\DoxyCodeLine{  \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a3e8ad34c2d14e24293a0beafc26186e7}{duplexChannels}};           \textcolor{comment}{// Maximum simultaneous input/output channels supported by device.}}
\DoxyCodeLine{  \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a5365245e73ffe29a05734de4474acd58}{isDefaultOutput}};                  \textcolor{comment}{// true if this is the default output device.}}
\DoxyCodeLine{  \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a7c8aca084bd908799b6be5954b80def2}{isDefaultInput}};                   \textcolor{comment}{// true if this is the default input device.}}
\DoxyCodeLine{  std::vector<unsigned int> \mbox{\hyperlink{struct_rt_audio_1_1_device_info_afa65f5f92f66ce7aacd3ff35e11b230f}{sampleRates}}; \textcolor{comment}{// Supported sample rates.}}
\DoxyCodeLine{  \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_ae9f35de296b33ae1f4e7baab8fd3be6e}{preferredSampleRate}};      \textcolor{comment}{// Preferred sample rate, e.g. for WASAPI the system sample rate.}}
\DoxyCodeLine{  \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} \mbox{\hyperlink{struct_rt_audio_1_1_device_info_a23251b549b89b2fe04a57fcd7cb76ea4}{nativeFormats}};           \textcolor{comment}{// Bit mask of supported data formats.}}
\DoxyCodeLine{\};}
\end{DoxyCode}


The following data formats are defined and fully supported by \mbox{\hyperlink{class_rt_audio}{Rt\+Audio}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}};}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} RTAUDIO\_SINT8 = 0x1;    \textcolor{comment}{// 8-\/bit signed integer.}}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} RTAUDIO\_SINT16 = 0x2;   \textcolor{comment}{// 16-\/bit signed integer.}}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} RTAUDIO\_SINT24 = 0x4;   \textcolor{comment}{// 24-\/bit signed integer.}}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} RTAUDIO\_SINT32 = 0x8;   \textcolor{comment}{// 32-\/bit signed integer.}}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} RTAUDIO\_FLOAT32 = 0x10; \textcolor{comment}{// Normalized between plus/minus 1.0.}}
\DoxyCodeLine{\textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{_rt_audio_8h_aafca92882d25915560018873221e44b8}{RtAudioFormat}} RTAUDIO\_FLOAT64 = 0x20; \textcolor{comment}{// Normalized between plus/minus 1.0.}}
\end{DoxyCode}


The {\ttfamily native\+Formats} member of the \mbox{\hyperlink{struct_rt_audio_1_1_device_info}{Rt\+Audio\+::\+Device\+Info}} structure is a bit mask of the above formats which are natively supported by the device. However, \mbox{\hyperlink{class_rt_audio}{Rt\+Audio}} will automatically provide format conversion if a particular format is not natively supported. When the {\ttfamily probed} member of the \mbox{\hyperlink{struct_rt_audio_1_1_device_info}{Rt\+Audio\+::\+Device\+Info}} structure is false, the remaining structure members are undefined and the device is probably unusable.

Some audio devices may require a minimum channel value greater than one. \mbox{\hyperlink{class_rt_audio}{Rt\+Audio}} will provide automatic channel number compensation when the number of channels set by the user is less than that required by the device. Channel compensation is {\itshape N\+OT} possible when the number of channels set by the user is greater than that supported by the device.

Note that the device enumeration is system specific and will change if any devices are plugged or unplugged by the user. Thus, the device numbers should be verified immediately before opening a stream. As well, if a user unplugs a device while an open stream is using that device, the resulting stream behaviour will be undefined (a system error will likely be generated).

Also, the capabilities reported by a device driver or underlying audio A\+PI are not always accurate and/or may be dependent on a combination of device settings. For this reason, \mbox{\hyperlink{class_rt_audio}{Rt\+Audio}} does not rely on the queried values when attempting to open a stream. 