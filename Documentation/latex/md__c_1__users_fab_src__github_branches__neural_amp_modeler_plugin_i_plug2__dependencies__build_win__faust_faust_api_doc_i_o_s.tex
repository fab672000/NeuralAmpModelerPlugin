This A\+PI allows to interact with a \mbox{\hyperlink{struct_faust}{Faust}} object and its associated audio engine on i\+OS at a high level. The idea is that all the audio part of the app is implemented in \mbox{\hyperlink{struct_faust}{Faust}} allowing developers to focus on the design of the app itself.

For more details on how to create i\+OS apps from scratch using this tool, check the \href{https://ccrma.stanford.edu/~rmichon/faust2api}{\texttt{ {\ttfamily faust2api} documentation}} or the \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-ios-apps}{\texttt{ {\itshape Adding Faust Real-\/\+Time Audio Support to i\+OS Apps Tutorial}}}.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_win__faust_faust_api_doc_i_o_s_autotoc_md223}{}\doxysection{Using This Package}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_win__faust_faust_api_doc_i_o_s_autotoc_md223}
This section is an accelerated version of the \href{https://ccrma.stanford.edu/~rmichon/faustTutorials/\#adding-faust-real-time-audio-support-to-ios-apps}{\texttt{ {\itshape Adding Faust Real-\/\+Time Audio Support to i\+OS Apps Tutorial}}}. We strongly recommend you to read it if this is the first time that you use this tool.\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_win__faust_faust_api_doc_i_o_s_autotoc_md224}{}\doxysubsection{App Set-\/\+Up}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_win__faust_faust_api_doc_i_o_s_autotoc_md224}
Very little work has to be done to integrate this package to your i\+OS app.

First, in your app configuration in X\+Code, make sure that the {\ttfamily Audio\+Toolbox} framework is imported in {\ttfamily T\+A\+R\+G\+E\+T\+S/\+You\+App/\+Build\+Phases/\+Link Binary With Libraries}. If you used the {\ttfamily -\/midi} option when generating the A\+PI, you\textquotesingle{}ll also have to import the {\ttfamily Core\+M\+I\+DI} framework.

Import {\ttfamily Dsp\+Faust.\+h} and {\ttfamily Dsp\+Faust.\+cpp} in your project (this can be done simply by dragging these files in your project tree). Then, import {\ttfamily Dsp\+Faust.\+h} ({\ttfamily \#import \char`\"{}\+Dsp\+Faust.\+h\char`\"{}}) in the file where you want to create/control the \mbox{\hyperlink{struct_faust}{Faust}} object (e.\+g. your main \mbox{\hyperlink{interface_view_controller}{View\+Controller}}). Make sure that the file where you import {\ttfamily Dsp\+Faust.\+h} has the {\ttfamily .mm} extension (this is necessary to be able to use C++ code in your objective-\/c file).\hypertarget{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_win__faust_faust_api_doc_i_o_s_autotoc_md225}{}\doxysubsection{Using the A\+PI}\label{md__c_1__users_fab_src__github_branches__neural_amp_modeler_plugin_i_plug2__dependencies__build_win__faust_faust_api_doc_i_o_s_autotoc_md225}
The current \mbox{\hyperlink{struct_faust}{Faust}} A\+PI is designed to seamlessly integrate to the life cycle of an i\+OS app. It is accessible through a single {\ttfamily \mbox{\hyperlink{class_dsp_faust}{Dsp\+Faust}}} object. The constructor of that object is used to set the sampling rate and the block size\+: \begin{DoxyVerb}DspFaust* dspFaust = new DspFaust(SR, blockSize);
\end{DoxyVerb}


The {\ttfamily start()} method is used to start the audio computing and would typically be placed in the {\ttfamily view\+Did\+Load} method of the app\textquotesingle{}s main {\ttfamily \mbox{\hyperlink{interface_view_controller}{View\+Controller}}}.

Similarly, {\ttfamily stop()} can be called to stop the audio computing and can be placed in {\ttfamily did\+Receive\+Memory\+Warning} along with the {\ttfamily \mbox{\hyperlink{class_dsp_faust}{Dsp\+Faust}}} destructor, etc.

It is possible to interact with the different parameters of the \mbox{\hyperlink{struct_faust}{Faust}} object by using the {\ttfamily set\+Param\+Value} method. Two versions of this method exist\+: one where the parameter can be selected by its address and one where it can be selected using its ID. The \href{\#parameters-list}{\texttt{ Parameters List}} section gives a list of the addresses and corresponding I\+Ds of the current \mbox{\hyperlink{struct_faust}{Faust}} object.

If your \mbox{\hyperlink{struct_faust}{Faust}} object is polyphonic (e.\+g. if you used the {\ttfamily -\/nvoices} option when generating this A\+PI), then you can use the M\+I\+DI polyphony methods like {\ttfamily key\+On}, {\ttfamily key\+Off}, etc.

It is possible to change the parameters of polyphonic voices independently using the {\ttfamily set\+Voice\+Param\+Value} method. This method takes as one of its arguments the address to the voice returned by {\ttfamily key\+On} or {\ttfamily new\+Voice} when it is called. E.\+g\+: \begin{DoxyVerb}uintptr_t voiceAddress = dspFaust->keyOn(70,100);
dspFaust->setVoiceParamValue(1, voiceAddress, 214);
dspFaust->keyOff(70);
\end{DoxyVerb}


In the example above, a new note is created and its parameter ID 1 is modified. This note is then terminated. Note that parameters addresses (path) are different for independent voices than when using {\ttfamily set\+Param\+Value}. The list of these addresses is provided in a separate sub-\/section of the \href{\#parameters-list}{\texttt{ Parameters List}} section.

Finally, note that new voices don\textquotesingle{}t necessarily have to be created using {\ttfamily key\+On}. Indeed, you might choose to just use the {\ttfamily new\+Voice} method for that\+: \begin{DoxyVerb}uintptr_t voiceAddress = dspFaust->newVoice;
dspFaust->setVoiceParamValue(1, voiceAddress, 214);
dspFaust->deleteVoice(voiceAddress);
\end{DoxyVerb}


This is particularly useful when making apps where each finger of the user is an independent sound that doesn\textquotesingle{}t necessarily has a pitch.

In case you would like to use the the built-\/in accelerometer or gyroscope of your device to control some of the parameters of your \mbox{\hyperlink{struct_faust}{Faust}} object, all you have to do is to send the raw accelerometer data to it by using the {\ttfamily propagate\+Acc} or {\ttfamily propagate\+Gyr} for the gyroscope. After that, mappings can be configured directly from the \mbox{\hyperlink{struct_faust}{Faust}} code using \href{\#using-built-in-sensors-to-control-parameters}{\texttt{ this technique}} or using the {\ttfamily set\+Acc\+Converter} and {\ttfamily set\+Gyr\+Converter} method. 