In the first example we derive a class directly from F\+Unknown, using some of the helper macros provided by the S\+DK.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class }CMyClass: \textcolor{keyword}{public} FUnknown}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{    CMyClass ();}
\DoxyCodeLine{    \textcolor{keyword}{virtual} \string~CMyClass ();}
\DoxyCodeLine{}
\DoxyCodeLine{    DECLARE\_FUNKNOWN\_METHODS  \textcolor{comment}{// declares queryInterface, addRef and release}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{CMyClass::CMyClass ()}
\DoxyCodeLine{\{}
\DoxyCodeLine{    FUNKNOWN\_CTOR \textcolor{comment}{// init reference counter, increment global object counter}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{CMyClass::\string~CMyClass ()}
\DoxyCodeLine{\{}
\DoxyCodeLine{    FUNKNOWN\_DTOR \textcolor{comment}{// decrement global object counter}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{IMPLEMENT\_REFCOUNT (CMyClass) \textcolor{comment}{// implements reference counting}}
\DoxyCodeLine{}
\DoxyCodeLine{tresult CMyClass::queryInterface (\textcolor{keyword}{const} \textcolor{keywordtype}{char}* iid, \textcolor{keywordtype}{void}** obj)}
\DoxyCodeLine{\{}
\DoxyCodeLine{    QUERY\_INTERFACE (iid, obj, ::FUnknown::iid, CMyClass)}
\DoxyCodeLine{    \textcolor{keywordflow}{return} kNoInterface;}
\DoxyCodeLine{\}}
\end{DoxyCode}


Developing a class with more than one interface is done by multiple inheritance. Additionally you have to provide an appropriate cast for each interface in the query\+Interface method.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class }CMyMultiClass : \textcolor{keyword}{public} \mbox{\hyperlink{class_steinberg_1_1_i_plugin_base}{Steinberg::IPluginBase}}, }
\DoxyCodeLine{                      \textcolor{keyword}{public} Steinberg::IPlugController,}
\DoxyCodeLine{                      \textcolor{keyword}{public} Steinberg::IEditorFactory}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{    DECLARE\_FUNKNOWN\_METHODS}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// declare the methods of all inherited interfaces here...}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{IMPLEMENT\_REFCOUNT (CMyMultiClass) \textcolor{comment}{// implements reference counting}}
\DoxyCodeLine{}
\DoxyCodeLine{tresult CMyMultiClass::queryInterface (\textcolor{keyword}{const} \textcolor{keywordtype}{char}* iid, \textcolor{keywordtype}{void}** obj)}
\DoxyCodeLine{\{}
\DoxyCodeLine{    QUERY\_INTERFACE (iid, obj, Steinberg::FUnknown::iid, \mbox{\hyperlink{class_i_plugin_base}{IPluginBase}})}
\DoxyCodeLine{    QUERY\_INTERFACE (iid, obj, Steinberg::IPluginBase::iid, \mbox{\hyperlink{class_i_plugin_base}{IPluginBase}})}
\DoxyCodeLine{    QUERY\_INTERFACE (iid, obj, Steinberg::IPlugController::iid, IPlugController)}
\DoxyCodeLine{    QUERY\_INTERFACE (iid, obj, Steinberg::IEditorFactory::iid, IEditorFactory)}
\DoxyCodeLine{     *obj = 0;}
\DoxyCodeLine{    \textcolor{keywordflow}{return} kNoInterface;}
\DoxyCodeLine{\}}
\end{DoxyCode}
 