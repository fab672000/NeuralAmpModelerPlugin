<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: &lt;tt&gt;faust2android&lt;/tt&gt; Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><code>faust2android</code> Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="img/faust2android.png" alt="" width="80%" class="center-block" class="inline"/></p>
<p><code>faust2android</code> is a tool to convert a <a class="el" href="struct_faust.html">Faust</a> code into a fully functional Android application. It is part of the <a href="https://github.com/grame-cncm/faust">Faust distribution</a> and it is based on <a href="https://ccrma.stanford.edu/~rmichon/faust2api"><code>faust2api</code></a>.</p>
<p>This documentation shows how to install and use this tool.</p>
<h1><a class="anchor" id="autotoc_md206"></a>
Installing and Using &lt;tt&gt;faust2android&lt;/tt&gt;</h1>
<p>Although <code>faust2android</code> can be used directly on your computer, it might be easier to compile your apps using the <a href="http://faust.grame.fr/onlinecompiler/">Faust Online Compiler</a>. Indeed, <code>faust2android</code> relies on an important number of dependencies that you might not want to install on your system. If you're brave enough for this, read the following instructions!</p>
<p><b>Note:</b> <code>faust2android</code> will only work on Linux and OSX. If you use Windows, use the <a href="http://faust.grame.fr/onlinecompiler/">Online Compiler</a>.</p>
<p>Installation instructions should be the same for Linux and OSX.</p>
<p>First, <a class="el" href="struct_faust.html">Faust</a> (0 or 2) must be installed on your system. If it's not already the case, read the <a href="https://github.com/grame-cncm/faust/blob/master/README.md">Faust README</a> to learn how to do this.</p>
<p>Next, <a href="https://developer.android.com/studio/index.html">Download Android Studio</a> and extract it somewhere on your computer. We recommend creating an <code>/Android</code> folder in your home directory and place <code>android-studio</code> in it.</p>
<p>Add <code>android-studio/bin</code> to your path, e.g.: </p><pre class="fragment">export PATH=$PATH:/home/you/Android/android-studio/bin
</pre><p>Now you should be able to run Android Studio from your terminal simply by calling: </p><pre class="fragment">studio.sh
</pre><p>In Android Studio, in <code>Tools/Android/SDK Manager</code>, make sure that you have the latest SDK installed (Android 7.1.1 as of Dec. 8, 2016). Next click on the "SDK Tools" tab and install <code>CMake</code> and the <code>NDK</code>. Android Studio should automatically create an <code>/Sdk</code> folder in your <code>/Android</code> folder (<code>/Android/Sdk</code>)</p>
<p>Create dynamic links to <code>/Android/Sdk/ndk-bundle</code> and <code>/Android/Sdk</code> as follows: </p><pre class="fragment">ln -s ~/Android/Sdk/ndk-bundle ndk
ln -s ~/Android/Sdk sdk
</pre><p>This is very important since <code>faust2android</code> will be looking for these folder. Alternatively, you could modify the source code of <code>faust2android</code> to make sure that it's looking in the right folder but that's a more complicated option...</p>
<p>On Linux, make sure that JAVA is properly installed on your system. At the very least, the following packages should be installed: </p><pre class="fragment">openjdk-8-jdk
openjdk-8-jdk-headless
openjdk-8-jdk-jre
openjdk-8-jre-headless
</pre><p>We noticed some issues with <code>openjdk-9</code> when compiling Android apps from the terminal which is why we suggest you to install version 8 here. Although you might want to give a try to version 9: it's up to you!</p>
<p>Finally, make sure that the <code>JAVA_HOME</code> environment variable is properly configured on your system, e.g: </p><pre class="fragment">JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
export PATH=$PATH:$JAVA_HOME/bin
</pre><h1><a class="anchor" id="autotoc_md207"></a>
Generating an App</h1>
<p><code>faust2android</code> can simply be called from the command line: </p><pre class="fragment">faust2android faustFile.dsp
</pre><p>where <code>faustFile.dsp</code> is a <a class="el" href="struct_faust.html">Faust</a> program. This will generate a <code>.apk</code> file ready to be installed on any Android device!</p>
<p>The following options are available:</p>
<ul>
<li><code>-install</code>: once compilation is over, installs the generated app on the Android device connected to the computer</li>
<li><code>-source</code>: creates an eclipse project of the app in the current directory.</li>
<li><code>-swig</code>: regenerate the C++ and the JAVA interface for the native portion of the app. *<code>-faust</code>: only carries out the <a class="el" href="struct_faust.html">Faust</a> compilation and install the generated C++ file in the JNI folder.</li>
<li><code>-reuse</code>: keep build directory and reuse it to speedup compilation.</li>
<li><code>-debug</code>: verbose output.</li>
</ul>
<p>Any other options are considered as <a class="el" href="struct_faust.html">Faust</a> options. To get a list of the <a class="el" href="struct_faust.html">Faust</a> options type: <code>faust -h</code></p>
<p>For example: </p><pre class="fragment">faust2android -install faustFile.dsp    
</pre><p>will both create an app and install it on any device connected to your computer.</p>
<h1><a class="anchor" id="autotoc_md208"></a>
Features</h1>
<p>Any standard <a class="el" href="struct_faust.html">Faust</a> code can be used with <code>faust2android</code> and all the usual user interface elements are available (groups, hsliders, vsliders, knobs, buttons, check boxes, drop down menus, bar graphs, radio buttons, numerical entries, etc.). In addition to that, a set of meta data specific to <code>faust2android</code> can be used.</p>
<h2><a class="anchor" id="autotoc_md209"></a>
Accelerometer Assignment</h2>
<p>All the continuous user interface elements of faust2android apps can be controlled using the built-in accelerometers of the device either by assigning them manually through the app interface or from the <a class="el" href="struct_faust.html">Faust</a> code using meta data (check <a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#using-built-in-sensors-to-control-parameters">this tutorial</a> to learn how to do that).</p>
<p>From the app interface, make sure that the lock at the top right corner is unlocked and hold the name of the parameter you want to control for more than two seconds and the following interface should show up:</p>
<p><img src="img/accel.png" alt="" width="40%" class="center-block" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md210"></a>
Keyboard Interface</h2>
<p>When used in the top group of a <a class="el" href="struct_faust.html">Faust</a> code, <code>[style:keyboard]</code> assigns a polyphonic piano keyboard to the <code>freq</code>, <code>gain</code> and <code>gate</code> parameters of the object. For example, the following code: </p><pre class="fragment">import("stdfaust.lib");
freqMod = hslider("h:Modulator/Frequency", 777, 20, 15000, 1) : si.smoo;
modIndex = hslider("h:Modulator/Modulation Index", 1000, 0, 10000, 1) : si.smoo;
freq = hslider("h:General Parameters/freq", 440, 20, 8000, 1) : si.smoo;
gain = hslider("gain", 1, 0, 1, 0.01) : si.smoo;
gate = button("gate") : si.smoo;
process = vgroup("FMsynth [style:keyboard]",os.osc(freqMod)*modIndex + freq : os.osc*gate*gain &lt;: _,_);
</pre><p>will generate an app with the following interface:</p>
<p><img src="img/keyb.png" alt="" width="65%" class="center-block" class="inline"/></p>
<p>Notice that the <code>freq</code>, <code>gain</code> and <code>gate</code> parameters were automatically removed from the main interface.</p>
<h2><a class="anchor" id="autotoc_md211"></a>
"Multi" Interface</h2>
<p>Similarly to <code>[style:keyboard]</code>, <code>[style:multi]</code> should be placed in the top group of a <a class="el" href="struct_faust.html">Faust</a> object. This will create a 2 dimensional interface where parameters are represented by dots. One dot can control 2 parameters (X and Y axis). Parameters in the <a class="el" href="struct_faust.html">Faust</a> code should be linked to the interface using the <code>[multi:x]</code> meta data where "x" is the parameter number in the interface. For example, adapting the <a class="el" href="struct_faust.html">Faust</a> code presented previously: </p><pre class="fragment">import("stdfaust.lib");
freqMod = hslider("h:Modulator/Frequency [multi:0]", 777, 20, 15000, 1) : si.smoo;
modIndex = hslider("h:Modulator/Modulation Index [multi:1]", 1000, 0, 10000, 1) : si.smoo;
freq = hslider("h:General Parameters/freq [multi:2]", 440, 20, 8000, 1) : si.smoo;
gain = hslider("gain [multi:3]", 1, 0, 1, 0.01) : si.smoo;
gate = checkbox("gate") : si.smoo;
process = vgroup("FMsynth [style:multi]",os.osc(freqMod)*modIndex + freq : os.osc*gate*gain &lt;: *_,_);
</pre><p>will generate an app with the following interface:</p>
<p><img src="img/multi.png" alt="" width="65%" class="center-block" class="inline"/></p>
<p><code>[multi:0]</code> assigns the parameter to the X axis of the first dot. <code>[multi:1]</code> assigns the parameter to the Y axis of the second dot. <code>[multi:2]</code> assigns the parameter to the X axis of the second dot and so on. If <code>[multi:x]</code> is not used anywhere, the interface will be empty.</p>
<h2><a class="anchor" id="autotoc_md212"></a>
"Multi-Keyboard" Interface</h2>
<p>Combines the <code>multi</code> and the <code>keyboard</code> interfaces. For example, the following code: </p><pre class="fragment">import("stdfaust.lib");
freqMod = hslider("h:Modulator/Frequency [multi:0]", 777, 20, 15000, 1) : si.smoo;
modIndex = hslider("h:Modulator/Modulation Index [multi:1]", 1000, 0, 10000, 1) : si.smoo;
freq = hslider("h:General Parameters/freq", 440, 20, 8000, 1) : si.smoo);
gain = hslider("gain", 1, 0, 1, 0.01) : si.smoo;
gate = button("gate") : si.smoo;
process = vgroup("FMsynth [style:multikeyboard]",os.osc(freqMod)*modIndex + freq : os.osc*gate*gain &lt;: _,_);
</pre><p>will generate an app with the following interface:</p>
<p><img src="img/multiKeyb.png" alt="" width="65%" class="center-block" class="inline"/></p>
<p>A similar tool exists for iOS (<code>faust2ios</code>) and is part of the distribution too. While it works in a similar way than <code>faust2android</code>, it is unfortunately not documented. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
