<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Multi-effect Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Multi-effect Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md908"></a>
Description</h1>
<p>This effect makes copies of its input sound and remixes them to the stereo field using differently modulated delays, thus simulating a effects of nearly identical sound sources. The included effects are:</p>
<ul>
<li>Flanger</li>
<li>Chorus</li>
<li>Echo/Delay</li>
<li>Reverb</li>
</ul>
<p>The effects output is always stereo, while its input may be either mono or stereo. To minimize CPU usage, place the effects at the point in your effects chain where the effects are mono to the left and stereo to the right.</p>
<h1><a class="anchor" id="autotoc_md909"></a>
Parameters</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Effect </th><th class="markdownTableHeadNone">Parameter </th><th class="markdownTableHeadNone">MIDI CC # </th><th class="markdownTableHeadNone">Type </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>Enable</b> </td><td class="markdownTableBodyNone"><code>CC-105</code> </td><td class="markdownTableBodyNone">switch<code>SW-4</code> </td><td class="markdownTableBodyNone">Turn the effect on/off  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>Feedback</b> </td><td class="markdownTableBodyNone"><code>CC-2</code> </td><td class="markdownTableBodyNone">knob <code>HDAC-0</code> </td><td class="markdownTableBodyNone">Controls the number of echo repetitions between 1 and infinity. - performable  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>Delay Portament</b> </td><td class="markdownTableBodyNone"><code>CC-60</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">DelayT60 controls the speed of Delay, Warp. It gives the time to DelayT60 to the next knob setting in seconds. contents. - performable  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>Delay</b> </td><td class="markdownTableBodyNone"><code>CC-61</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">Time between echoes in seconds - performable. Under Expert there is a Delay Glide which is a portamento for changing the delay time, and is also performable.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>Warp</b> </td><td class="markdownTableBodyNone"><code>CC-62</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">Warp moves the output delay-line tap at a rate controlled by Glide. It can create temporary "glitching" (low Glide) or Doppler shifts (high Glide) - performable (thanks to Glide)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>Amp</b> </td><td class="markdownTableBodyNone"><code>CC-75</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">Amplitude level of echoes relative to the direct signal - performable  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Echo </td><td class="markdownTableBodyNone"><b>FeedbackSm</b> </td><td class="markdownTableBodyNone"><code>CC-76</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">When an echo is fed back to echo again, it is also lowpass filtered according to this parameter. Tone = 0 ("Digital") corresponds to no filtering, while Tone = 1 ("Tape") gives maximum lowpass filtering, like an old magnetic tape.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone" colspan="5"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Reverb </td><td class="markdownTableBodyNone"><b>Enable</b> </td><td class="markdownTableBodyNone"><code>CC-104</code> </td><td class="markdownTableBodyNone">switch<code>SW-3</code> </td><td class="markdownTableBodyNone">Turn on/off the effect  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Reverb </td><td class="markdownTableBodyNone"><b>Damp</b> </td><td class="markdownTableBodyNone"><code>CC-3</code> </td><td class="markdownTableBodyNone">knob <code>HDAC-1</code> </td><td class="markdownTableBodyNone">Increasing the damping decreases the reverberation time.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Reverb </td><td class="markdownTableBodyNone"><b>Room Size</b> </td><td class="markdownTableBodyNone"><code>CC-4</code> </td><td class="markdownTableBodyNone">knob <code>HDAC-2</code> </td><td class="markdownTableBodyNone">Increasing the Room Size parameter lengthens the delay lines used in the reverberator, corresponding to longer path lengths between reflections in an acoustic space.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Reverb </td><td class="markdownTableBodyNone"><b>Wet Dry</b> </td><td class="markdownTableBodyNone"><code>CC-79</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">Level is the "dry/wet mix": 0 for "dry" (no reverb), and 1 for "wet" (pure reverberator output). Note that stereo imaging is normally reduced by reverberation, because the reverberated sound is supposed sound like it's coming from all directions. Reduce the Reverb Level to better preserve stereo imaging.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" colspan="5"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Chorus </td><td class="markdownTableBodyNone"><b>Enable</b> </td><td class="markdownTableBodyNone"><code>CC-103</code> </td><td class="markdownTableBodyNone">switch<code>SW-2</code> </td><td class="markdownTableBodyNone">Turn on/off the effect  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Chorus </td><td class="markdownTableBodyNone"><b>Delay</b> </td><td class="markdownTableBodyNone"><code>CC-55</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">The variable delays range between zero and this value  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Chorus </td><td class="markdownTableBodyNone"><b>Rate</b> </td><td class="markdownTableBodyNone"><code>CC-56</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">The Chorus Rate (performable) sets the highest frequency used in its LFOs for modulating the delay-line lengths  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Chorus </td><td class="markdownTableBodyNone"><b>Depth</b> </td><td class="markdownTableBodyNone"><code>CC-57</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">The Depth parameter (performable) controls the mixture of the input sound with the delayed-and-scaled copies of itself: 0 means input only (no chorus effect), 1/2 means equal balance (maximum incidental "flanging" effects), and 1 means modulated delay-line outputs only (pure chorus effect containing only scaling, onset spreading, and decorrelated Doppler shift).  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Chorus </td><td class="markdownTableBodyNone"><b>Deviation</b> </td><td class="markdownTableBodyNone"><code>CC-58</code> </td><td class="markdownTableBodyNone">knob </td><td class="markdownTableBodyNone">The Chorus Deviation sets the amplitude of its LFOs and therefore the range of delay-line length variation. The Deviation and Rate together determine the maximum Doppler shift applied to the sound.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" colspan="5"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Flanger </td><td class="markdownTableBodyNone"><b>Enable</b> </td><td class="markdownTableBodyNone"><code>CC-102</code> </td><td class="markdownTableBodyNone">switch<code>SW-1</code> </td><td class="markdownTableBodyNone">Turn on/off the effect  </td></tr>
</table>
<p>Flanger | <b>Invert</b> | <code>CC-49</code> | knob | Flanger | <b>Delay</b> | <code>CC-50</code> | knob | Maximum Delay (in ms) used by the flanger - the actual delay at any given time is between this value and zero. Flanger | <b>Rate</b> | <code>CC-51</code> | knob | The Flanger Rate parameter sets the frequency of its <a class="el" href="class_l_f_o.html">LFO</a> in Hz - performable Flanger | <b>Depth</b> | <code>CC-52</code> | knob | Depth of spectral notches - performable - Depth = 0 means no effect, Depth = 1 means maximum effect (spectral-notch gains go all the way down to zero). Flanger | <b>Feedback</b> | <code>CC-53</code> | knob | Gain applied to the output signal and then summed with the input signal - performable Flanger | <b>Wave Shape</b> | <code>CC-54</code> | knob |</p>
<h1><a class="anchor" id="autotoc_md910"></a>
Building the Example</h1>
<p>The faust code (.dsp) in this directory has been compiled using <code>faust2sam</code> into <code>effects-sam</code></p>
<div class="fragment"><div class="line">% faust2sam -midi effects.dsp</div>
</div><!-- fragment --><p>The result of this compile is a zip file <code>effects-sam.zuo</code> which contains the following three files:</p>
<ul>
<li><code>fast_pow2.h</code></li>
<li><code>samFaustDSP.cpp</code></li>
<li><code>samFaustDSP.h</code></li>
</ul>
<p>These 3 files should be placed into the directory <code>sam_baremetal_framework_core1/src/faust</code></p>
<p>In addition there is a header file that is common across all cores called <code>audio_system_config.h</code>. In this file the following pre-processor variables should be set in the following way. The example below indicates that a <a class="el" href="struct_faust.html">Faust</a> algorithm will only be running on Core1 and that Core2 will be simply passing audio to the codec.</p>
<div class="fragment"><div class="line">#define USE_FAUST_ALGORITHM_CORE1           TRUE</div>
<div class="line">#define USE_FAUST_ALGORITHM_CORE2           FALSE</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
