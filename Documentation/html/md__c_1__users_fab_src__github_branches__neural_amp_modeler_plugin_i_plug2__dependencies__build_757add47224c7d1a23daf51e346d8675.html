<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: &lt;tt&gt;faust2api&lt;/tt&gt; Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><code>faust2api</code> Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>NOTE:</b> this documentation was taken from the <code>faust2api</code> README.</p>
<h1><a class="anchor" id="autotoc_md872"></a>
Overview</h1>
<p>Thanks to its architectures system, <a href="http://faust.grame.fr">Faust</a> can generate a wide range of objects compatible with different platforms (Linux, Windows, OSX, RPI, Android, iOS, ROS, Bela and Web/JavaScript) and tools (Max/MSP, SuperCollider, PD, VST, AU, LV2, etc.). The mechanism behind this was designed to be as modular and reusable as possible. Additionally, the <a class="el" href="struct_faust.html">Faust</a> compiler can be embedded in any C++ program using the <a href="http://llvm.org/">LLVM</a> technology making it very portable.</p>
<p>The goal of the <code>faust2api</code> project is to provide a tool to easily generate custom APIs based on one or several <a class="el" href="struct_faust.html">Faust</a> objects. On one hand, <a href="http://faust.grame.fr/libraries.html">Faust DSP libraries</a> implement hundreds of open source <a class="el" href="class_d_s_p.html">DSP</a> algorithms that can be turned into C++, C, JAVA, JavaScript and LLVM bit code and embedded in your applications. On the other hand, <a class="el" href="struct_faust.html">Faust</a> C++ libraries can carry out a wide range of tasks going from connecting <a class="el" href="struct_faust.html">Faust</a> <a class="el" href="class_d_s_p.html">DSP</a> objects to a specific audio engine (CoreAudio, OpenSL/ES, Alsa, JACK, etc.) or adding MIDI and polyphony support, sensor data handling, etc. to the same object.</p>
<p>Most major <a class="el" href="struct_faust.html">Faust</a> targets are supported:</p>
<ul>
<li>iOS</li>
<li>Android</li>
<li>OSX CoreAudio</li>
<li>ALSA</li>
<li>JACK</li>
<li>PortAudio</li>
<li>RTAudio</li>
<li>openFrameworks</li>
<li>JUCE</li>
</ul>
<p><b>NOTE:</b> This documentation only provides high level information on how to use <code>faust2api</code>. For detailed tutorials on this topic, visit <a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#adding-faust-real-time-audio-support-to-android-apps">this page</a>.</p>
<h1><a class="anchor" id="autotoc_md873"></a>
Using &lt;tt&gt;faust2api&lt;/tt&gt;</h1>
<p>Elements generated by <code>faust2api</code> greatly vary from one platform to another. Thus, a custom documentation is generated and integrated to packages generated by <code>faust2api</code> in function of the options provided to it (if you only want to generate the package without the documentation, which can save some compilation time, you can use the <code>-mdoc</code> option). As a result, this page doesn't provide information on how to use the generated APIs, but rather high level instructions on how to configure <code>faust2api</code> to carry out specific tasks.</p>
<p>The various options of <code>faust2api</code> can be displayed at any point by running: </p><pre class="fragment">faust2api -help
</pre><p><code>faust2api</code> is part of the <a href="https://github.com/grame-cncm/faust">Faust distribution</a>. To use it, <a class="el" href="struct_faust.html">Faust</a> must be properly installed on your system (read the <a class="el" href="struct_faust.html">Faust</a> README in the previous link to get more information on how to do that).</p>
<p>Common options for all platforms:</p>
<ul>
<li><code>-opt native|generic</code>: to activate the best compilation options for the native or generic CPU.</li>
<li><code>-nvoices &lt;num&gt;</code> : creates a polyphonic object with &lt;num&gt; voices.</li>
<li><code>-effect &lt;effect.dsp&gt;</code>: adds an effect to the polyphonic synth (this option is ignored if -nvoices is not specified).</li>
<li><code>-effect auto</code>: adds an effect (extracted automatically from the dsp file) to the polyphonic synth (this option is ignored if -nvoices is not specified).</li>
<li><code>-nodoc</code> : prevents documentation from being generated.</li>
<li><code>-nozip</code> : prevents generated files to be put in a zip file.</li>
<li><code>-target &lt;target&gt;</code>: sets a name of the target folder or the zip file. Defaults to "dsp-faust"</li>
</ul>
<p>Options supported by iOS, CoreAudio, ALSA, JACK, PortAudio, openFrameworks and JUCE:</p>
<ul>
<li><code>midi</code>: add built-in <a class="el" href="class_rt_midi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a> support to the API.</li>
<li><code>osc</code>: add built-in OSC support to the API.</li>
<li><code>soundfile</code>: add built-in <a class="el" href="struct_soundfile.html">Soundfile</a> support to the API.</li>
</ul>
<h2><a class="anchor" id="autotoc_md874"></a>
Android Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into an Android API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -android yourFaustCode.dsp</div>
</div><!-- fragment --><p>The JAVA package name of the API generated by <code>faust2api</code> is <code>com.DspFaust</code>. It can easily be changed by using the <code>-package</code> option. For example, to change the package to <code>com.you.DspFaust</code>, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -android -package com.you yourFaustCode.dsp</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md875"></a>
iOS Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into an iOS API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -ios yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add <a class="el" href="class_rt_midi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a> support to the API. The <code>-osc</code> option can be used to add OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md876"></a>
OSX CoreAudio Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into an OSX CoreAudio API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -coreaudio yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add <a class="el" href="class_rt_midi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a> support to the API. The <code>-osc</code> option can be used to add OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md877"></a>
ALSA Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into an ALSA API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -alsa yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add <a class="el" href="class_rt_midi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a> support to the API. The <code>-osc</code> option can be used to add OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md878"></a>
JACK Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into a JACK API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -jack yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add JACK MIDI support to the API. The <code>-osc</code> option can be used to add OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md879"></a>
PortAudio Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into a PortAudio API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -portaudio yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add <a class="el" href="class_rt_midi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a> support to the API. The <code>-osc</code> option can be used to add OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md880"></a>
RTAudio Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into an RTAudio API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -rtaudio yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add <a class="el" href="class_rt_midi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a> support to the API. The <code>-osc</code> option can be used to add OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md881"></a>
OpenFrameworks Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into an openFrameworks API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -of yourFaustCode.dsp</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md882"></a>
JUCE Support</h2>
<p>To turn a <a class="el" href="struct_faust.html">Faust</a> code into a JUCE API, just run the following command:</p>
<div class="fragment"><div class="line">faust2api -juce yourFaustCode.dsp</div>
</div><!-- fragment --><p>The <code>-midi</code> option can be used to add JUCE MIDI support to the API. The <code>-osc</code> option can be used to add JUCE OSC support to the API.</p>
<h2><a class="anchor" id="autotoc_md883"></a>
Customizing the API</h2>
<h3><a class="anchor" id="autotoc_md884"></a>
Polyphonic Object</h3>
<p>To create a polyphonic object, set the maximum number of voices of this object using the <code>-nvoices</code> option e.g.:</p>
<div class="fragment"><div class="line">faust2api -android -nvoices 12 yourSynth.dsp</div>
</div><!-- fragment --><p>In this case, we're creating an object with a maximum number of 12 polyphonic voices. Voices are only instantiated and computed when they are used, so this is just a safe guard...</p>
<h3><a class="anchor" id="autotoc_md885"></a>
MIDI Enabled Polyphonic Object</h3>
<p>To create a polyphonic object controllable by a MIDI keyboard, run the previous command but make sure that the <code>freq</code>, <code>gain</code> and <code>gate</code> parameters are declared in your <a class="el" href="struct_faust.html">Faust</a> code. E.g:</p>
<div class="fragment"><div class="line">f = hslider(&quot;freq&quot;,300,50,2000,0.01);</div>
<div class="line">bend = hslider(&quot;bend[midi:pitchwheel]&quot;,1,0,10,0.01) : si.polySmooth(gate,0.999,1);</div>
<div class="line">gain = hslider(&quot;gain&quot;,1,0,1,0.01);</div>
<div class="line">s = hslider(&quot;sustain[midi:ctrl 64]&quot;,0,0,1,1); // for sustain pedal</div>
<div class="line">t = button(&quot;gate&quot;);</div>
<div class="line"> </div>
<div class="line">cutoff = hslider(&quot;cutoff[midi:ctrl 1]&quot;,50,50,4000,0.001) : si.polySmooth(gate,0.999,2);</div>
<div class="line">gate = t+s : min(1);</div>
<div class="line">freq = f*bend;</div>
<div class="line">envelope = gate*gain : si.smoo;</div>
<div class="line"> </div>
<div class="line">process = os.sawtooth(freq)*envelope : fi.lowpass(3,cutoff) &lt;: _,_;</div>
</div><!-- fragment --><p><code>freq</code> (which should be a frequency) will be automatically mapped to MIDI note numbers, <code>gain</code> (which should be a value between 0 and 1) to velocity and <code>gate</code> to <em>note-on</em> / <em>note-off</em> events. Thus, <code>gate</code> can be used as a trigger signal for any envelope generator, etc.</p>
<p>Continuous pitch control is carried out through <code>bend</code> which is used to modulate the pitch set by <code>freq</code>.</p>
<p>Note that we're using the <code>si.polySmooth</code> function here to smooth the value of some parameters. This function is very useful when creating polyphonic objects as it only starts smoothing after the note was created, preventing "ugly" sweeps, etc.</p>
<p>0.999 is the pole of the lowpass used for smoothing and 2 is the number of samples to wait before smoothing begins after the voice was created.</p>
<h3><a class="anchor" id="autotoc_md886"></a>
Adding an Audio Effect to a Polyphonic Object</h3>
<p>If creating a polyphonic synthesizer, it is very likely that you will need to plug its output to an audio effect like a reverb. Putting that effect in your main <a class="el" href="struct_faust.html">Faust</a> code is not a good idea since it will be instanciated for each voice which would be very inefficient. Fortunately, <code>faust2api</code> can take a second <a class="el" href="struct_faust.html">Faust</a> file as one of its arguments, containing an audio effect (could be a chain of audio effects, of course). The only rule is that the number of outputs of the synth must the same as the number of inputs of the effect. For example, your effect <a class="el" href="struct_faust.html">Faust</a> file could look like this: </p><pre class="fragment">import("stdfaust.lib");
process = dm.zita_rev1;
</pre><p><code>zita_rev1</code> is a stereo reverb with a built-in <a class="el" href="class_u_i.html">UI</a> that can be connected to the synthesizer presented in the previous section. This code must be saved in a separate <a class="el" href="struct_faust.html">Faust</a> file (e.g., <code>effect.dsp</code>).</p>
<p>To generate the corresponding API on Android, run: </p><pre class="fragment">faust2api -android -nvoices 12 -effect effect.dsp yourSynth.dsp
</pre><p>Keep in mind that the package generated by <code>faust2api</code> contains a README file that you should really read at this point! Also, for more information, check our tutorials on <a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#adding-faust-real-time-audio-support-to-android-apps">Using <code>faust2api</code> to Add Faust Audio Support to Android Apps</a> and <a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#adding-faust-real-time-audio-support-to-ios-apps">Using <code>faust2api</code> to Add Faust Audio Support to iOS Apps</a>.</p>
<h1><a class="anchor" id="autotoc_md887"></a>
Additional Resources</h1>
<ul>
<li><a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#what-is-faust">What Is Faust?</a></li>
<li><a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#faust-hero-in-2-hours">Faust Hero in 2 Hours</a></li>
<li><a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#adding-faust-real-time-audio-support-to-android-apps">Using <code>faust2api</code> to Add Faust Audio Support to Android Apps</a></li>
<li><a href="https://ccrma.stanford.edu/~rmichon/faustTutorials/#adding-faust-real-time-audio-support-to-ios-apps">Using <code>faust2api</code> to Add Faust Audio Support to iOS Apps</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
